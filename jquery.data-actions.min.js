/*!
 * Script name: data-actions
 * Script URI: https://github.com/nikolays93/jquery.data-actions/
 * Author: NikolayS93
 * Author URI: //vk.com/nikolays_93
 * Description: jQuery actions.
 * Version: 1.5b
 * License: GNU General Public License v2 or later
 * License URI: http://www.gnu.org/licenses/gpl-2.0.html
 */

jQuery(function($){function doAction($obj,target,action){if("this"===target)var evalTarget="$(this)";else{var evalTarget="$('"+target+"')",exp={"> ":"$obj.children('","< ":"$obj.parent('",">> ":"$obj.find('","<< ":"$obj.closest('","<> ":"$obj.parent().children('","<<>> ":"$obj.parent().find('"};$.each(exp,function(t,e){var a=new RegExp("^("+t+")");target.match(a)&&(evalTarget=e+target.replace(a,"")+"')")}),console.log(evalTarget)}eval(evalTarget+"."+action+"("+$obj.data("props")+");")}function setAction(t,e,a,i){t.on(a,function(o){$(this).data("wrapper")&&o.target!==this||($(this).data("allow-click")||"click"!=a||o.preventDefault(),i||(i=t.data("action")),doAction(t,e,i))})}function replaceTextOnly(t,e,a){for(var i=t.get(0),o=i.childNodes,c=0;c<o.length;c++)3==o[c].nodeType&&(o[c].textContent?o[c].textContent=o[c].textContent.replace(e,a):o[c].nodeValue=o[c].nodeValue.replace(e,a))}function textRepalce(t){$wasObj=t;var e=t.attr("data-text-replace"),a=t.attr("data-text-replace-to"),i=t.data("target");if(i&&(t=$(i)),e&&a)t.attr("data-text-replaced")?(replaceTextOnly(t,a,e),t.removeAttr("data-text-replaced")):(replaceTextOnly(t,e,a),t.attr("data-text-replaced","true"));else{var o=t.text();$wasObj.attr("data-text-replace",o),t.text(e)}}$("[data-action]").each(function(t,e){var a=$(this).data("target")?$(this).data("target"):$(this).closest("[data-target]").data("target");a||(a="this");var i=$(this).data("trigger");return"load"==i?void doAction($(this),a,$(this).data("action")):(i||(i="click"),void setAction($(this),a,i))});var easyActions=["hide","show","fade-Out","fade-In","slide-Up","slide-Down","toggle","fade-Toggle","slide-Toggle"];easyActions.forEach(function(t,e,a){$("[data-"+t+"]").each(function(e,a){if(action=t.replace("-",""),"checkbox"==$(this).attr("type")||"radio"==$(this).attr("type")){"false"!==$(this).data("toggle")&&(action=t.split("-")[0],action="hide"==action||"show"==action?"toggle":action+"Toggle");var i=t.replace("-","");$(this).is(":checked")||(i=["show","fadeIn","slideDown"].includes(i)?i.replace("show","hide").replace("In","Out").replace("Down","Up"):i.replace("hide","show").replace("Out","In").replace("Up","Down")),doAction($(this),$(this).data(t),i);var o="change"}else{var o=$(this).data("trigger");o||(o="click")}setAction($(this),$(this).data(t),o,action)})}),$("[data-text-replace]").each(function(t,e){var a=$(this).data("trigger");a||(a="click"),"load"==a?textRepalce($(this)):$(this).on(a,function(){textRepalce($(this))})})});