/*!
 * Script name: data-actions
 * Script URI: https://github.com/nikolays93/jquery.data-actions/
 * Author: NikolayS93
 * Author URI: //vk.com/nikolays_93
 * Description: jQuery actions.
 * Version: 1.7b
 * License: GNU General Public License v2 or later
 * License URI: http://www.gnu.org/licenses/gpl-2.0.html
 */

jQuery(function($){function doAction($obj,target,action){if("this"===target)var evalTarget="$(this)";else{var evalTarget="$('"+target+"')",exp={"> ":"$obj.children('","< ":"$obj.parent('",">> ":"$obj.find('","<< ":"$obj.closest('","<> ":"$obj.parent().children('","<<>> ":"$obj.parent().find('"};$.each(exp,function(t,a){var e=new RegExp("^("+t+")");target.match(e)&&(evalTarget=a+target.replace(e,"")+"')")})}var props=$obj.data("props")?$obj.data("props"):"";eval(evalTarget+"."+action+"("+props+");")}function setAction(t,a,e,r){t.on(e,function(i){$(this).data("wrapper")&&i.target!==this||($(this).data("allow-click")||"click"!=e||i.preventDefault(),r||(r=t.data("action")),doAction(t,a,r))})}function replaceTextOnly(t,a,e){for(var r=t.get(0),i=r.childNodes,o=0;o<i.length;o++)3==i[o].nodeType&&(i[o].textContent?i[o].textContent=i[o].textContent.replace(a,e):i[o].nodeValue=i[o].nodeValue.replace(a,e))}function textRepalce(t){$wasObj=t;var a=t.attr("data-text-replace"),e=t.attr("data-text-replace-to"),r=t.data("target");if(r&&(t=$(r)),a&&e)t.attr("data-text-replaced")?(replaceTextOnly(t,e,a),t.removeAttr("data-text-replaced")):(replaceTextOnly(t,a,e),t.attr("data-text-replaced","true"));else{var i=t.text();$wasObj.attr("data-text-replace",i),t.text(a)}}$("[data-action]").each(function(t,a){var e=$(this).data("target")?$(this).data("target"):$(this).closest("[data-target]").data("target");e||(e="this");var r=$(this).data("trigger");return"load"==r?void doAction($(this),e,$(this).data("action")):(r||(r="click"),void setAction($(this),e,r))});var easyActions=["hide","show","fade-out","fade-in","slide-up","slide-down","fade-toggle","slide-toggle"];easyActions.forEach(function(t,a,e){$("[data-"+t+"]").each(function(a,e){var r=t.split("-");action=t.indexOf("-")>-1?r[0]+r[1].charAt(0).toUpperCase()+r[1].substr(1).toLowerCase():t;var i=$(this).data("trigger");i||(i="checkbox"==$(this).attr("type")||"radio"==$(this).attr("type")?"change":"click"),setAction($(this),$(this).data(t),i,action)})}),$("[data-text-replace]").each(function(t,a){var e=$(this).data("trigger");e||(e="click"),"load"==e?textRepalce($(this)):$(this).on(e,function(){textRepalce($(this))})})});